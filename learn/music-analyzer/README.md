# 🎵 AI音乐分析与创作助手

这是一个基于机器学习的音乐分析和创作辅助工具，可以分析你喜欢的音乐特征，并为你的音乐创作提供AI建议。

## 🚀 功能特点

- **音乐特征提取**: 自动分析BPM、节奏、频谱、MFCC等26+个特征
- **可视化分析**: 生成波形图、频谱图、MFCC图等可视化图表
- **风格聚类**: 使用机器学习发现音乐风格规律
- **创作建议**: 基于分析结果生成AI创作指南
- **模板生成**: 输出可用于DAW的创作参数模板

## 📁 项目结构

```
music-analyzer/
├── songs/                    # 放置要分析的音乐文件
├── analyze.py               # 音乐特征提取脚本
├── pattern_analyzer.py      # 深度模式分析脚本
├── ai_composer.py          # AI创作助手
├── analysis_results.csv    # 分析结果数据
└── README.md               # 使用说明
```

## 🛠️ 安装依赖

```bash
# 激活虚拟环境
venv\Scripts\activate

# 安装依赖
pip install librosa matplotlib pandas numpy scikit-learn seaborn
```

## 📖 使用步骤

### 1. 准备音乐文件
将你想分析的音乐文件（MP3、WAV、FLAC等）放到 `songs/` 文件夹中。

### 2. 提取音乐特征
```bash
python analyze.py
```
这会生成：
- `analysis_results.csv` - 包含所有特征数据
- 每首歌的波形图、频谱图、MFCC图

### 3. 深度模式分析
```bash
python pattern_analyzer.py
```
这会生成：
- 特征相关性热力图
- 音乐风格聚类可视化
- 特征重要性分析图
- 完整分析报告

### 4. 生成AI创作建议
```bash
python ai_composer.py
```
这会生成：
- 个性化创作指南
- JSON格式的创作模板
- 和弦进行建议
- 制作技巧建议

## 🎼 输出文件说明

### 数据文件
- `analysis_results.csv` - 音乐特征数据表格
- `composition_template_*.json` - 创作模板（可导入DAW）

### 可视化图片
- `output_*.png` - 波形+鼓点图
- `mel_*.png` - 梅尔频谱图
- `mfcc_*.png` - MFCC特征图
- `correlation_matrix.png` - 特征相关性图
- `clustering_visualization.png` - 风格聚类图
- `feature_importance.png` - 特征重要性图

### 报告文件
- `music_analysis_report.md` - 完整分析报告

## 🎨 如何利用分析结果创作

### 1. 了解你的音乐偏好
- **BPM范围**: 确定你喜欢的节奏速度
- **节奏强度**: 了解你偏爱的节奏类型
- **频谱特征**: 发现你喜欢的音色风格

### 2. 发现音乐规律
- **相关性分析**: 哪些特征总是一起出现？
- **聚类分析**: 你的歌曲可以分为几个风格？
- **特征重要性**: 哪些特征最能区分不同风格？

### 3. 应用创作建议
- **设置DAW项目**: 使用推荐的BPM和调式
- **选择乐器**: 根据节奏特征选择合适的乐器
- **和弦进行**: 尝试建议的和弦进行
- **制作技巧**: 应用混音和制作建议

### 4. 实际创作流程

1. **前期准备**
   ```bash
   # 分析你的参考歌曲
   python analyze.py
   python ai_composer.py
   ```

2. **创作设置**
   - 根据建议设置DAW项目BPM
   - 选择推荐的乐器音色
   - 设置建议的歌曲结构

3. **旋律创作**
   - 参考MFCC特征创作旋律走向
   - 使用建议的音域范围
   - 应用节奏复杂度建议

4. **和声编配**
   - 尝试建议的和弦进行
   - 根据频谱复杂度调整和声密度

5. **制作混音**
   - 应用制作技巧建议
   - 参考频谱特征调整EQ
   - 根据节奏强度设置压缩

## 🔍 深度分析技巧

### 发现隐藏规律
1. **时间维度**: 分析不同时期喜好的变化
2. **情绪维度**: 将歌曲按情绪分类分析
3. **风格维度**: 对比不同风格的特征差异

### 扩展分析
```python
# 自定义分析脚本示例
import pandas as pd

df = pd.read_csv('analysis_results.csv')

# 分析BPM与情绪的关系
slow_songs = df[df['bpm'] < 90]
fast_songs = df[df['bpm'] > 120]

print("慢歌特征:", slow_songs['onset_mean'].mean())
print("快歌特征:", fast_songs['onset_mean'].mean())
```

## 🎯 创作建议应用实例

### 情景1: 创作抒情慢歌
如果分析显示你喜欢BPM 70-85的歌曲：
- 设置DAW项目为75 BPM
- 使用钢琴、弦乐为主
- 选择温暖的混响设置
- 尝试 vi-IV-I-V 和弦进行

### 情景2: 创作舞曲
如果分析显示你喜欢BPM 128+的歌曲：
- 设置DAW项目为128 BPM
- 强调鼓点和低音
- 使用短混响保持清晰
- 设计能量递增的歌曲结构

## 🤖 结合大模型创作

1. **特征总结**: 将分析结果输入ChatGPT等大模型
2. **风格描述**: 让AI总结你的音乐风格特点
3. **创作建议**: 获取更详细的创作建议
4. **歌词创作**: 基于音乐特征创作匹配的歌词

示例提示词：
```
基于以下音乐分析数据，帮我总结我的音乐喜好特点，并给出创作建议：
- 平均BPM: 95
- 节奏强度: 0.65
- 主要聚类特征: [数据]
请分析我的音乐风格并给出创作建议。
```

## 🔧 故障排除

### 常见问题
1. **文件格式不支持**: 确保音频文件为MP3、WAV、FLAC格式
2. **内存不足**: 分批处理大量音频文件
3. **依赖库错误**: 重新安装librosa和相关依赖

### 优化建议
1. **文件大小**: 使用3-5分钟的音频片段即可
2. **数量建议**: 10-50首歌曲能获得较好的分析结果
3. **风格一致性**: 分析同类型音乐效果更好

## 📈 进阶功能

### 自定义特征提取
可以修改 `analyze.py` 添加更多特征：
- 和声复杂度
- 动态范围
- 音色变化率
- 节拍稳定性

### 机器学习扩展
- 使用更复杂的聚类算法
- 训练风格分类模型
- 构建音乐推荐系统

---

## 💡 创作灵感

记住，这个工具是为了**启发**而不是**限制**你的创作！

- 分析结果是起点，不是终点
- 保持创作的直觉和情感
- 将技术分析与艺术直觉结合
- 不断实验和突破既定模式

祝你创作出更多优秀的音乐作品！🎶 